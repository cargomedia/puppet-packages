node default {

  $ssl_cert = '-----BEGIN CERTIFICATE-----
MIIDGDCCAgCgAwIBAgIJAISr5JGTVVfRMA0GCSqGSIb3DQEBCwUAMB8xEDAOBgNV
BAMMB215LW5hbWUxCzAJBgNVBAYTAlVTMB4XDTE1MTEwMTEzMjYzMFoXDTI1MTAy
OTEzMjYzMFowHzEQMA4GA1UEAwwHbXktbmFtZTELMAkGA1UEBhMCVVMwggEiMA0G
CSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCz8cQPqjZW1oM9myUQotq7dE91uJ/P
Uzs1gtbb4I2tpQcGTR1mgQgRu8l6St0e3qELU8c1s4sxVsMu3FfFEiJtHf629O18
IQB/zRSqlI4r5i/5Ln/FsViNxqWSox37G0aPCCn3aW7NE7FmNwQRnD81/znlPFrA
Q3Zu+4G0dxkzWLf67Nqk0apXWn56/a74vwvYejTN0cNzUCnDsTzjje3Ssuf14eJX
OOLqpvuwEIL0XfXBCye8qAI9sqNgJCakcIH6TkOGdLo2h5z2UMlo4Ctkj5eLgkUd
svFcEHw1ZWLOWzndcqp4SDnEjNFeLNj4zOPrL0kE1zzPh/qY8RYXofrzAgMBAAGj
VzBVMAwGA1UdEwQFMAMBAf8wRQYDVR0RBD4wPIIMZXhhbXBsZTEuY29tgg4qLmV4
YW1wbGUxLmNvbYIMZXhhbXBsZTIuY29tgg4qLmV4YW1wbGUyLmNvbTANBgkqhkiG
9w0BAQsFAAOCAQEArBemT0i2jUTzKKMVFy9dAB+EkCHXPzar68boo26QOEBAgar4
3DilhqClSUwKDIw0VZ5OCczRb3RV+VgIlHEeKD8n1yyQj72ny0PmUc9ep9HKY2Lv
9yMV0j2guETZfp2SJSlUozS1eElbaFcZqWD2ziIxewd77XJnatSu/buCQQUrdtqv
Aj7nIlhHpDP6UkNn4FV84HvLp/nwSfmp/D//Yib6pWPoDiYLNRhoHzxdekPJJ9dx
VR72liY1SZ6e+qPELJTAq1m3xG2BYEHWsUacuvPlbI3cku30sEXYy5B2jT399RCG
8lYvuzJvNDFkUk3Dp8UUDUkYwLCM0x5wrVbXxw==
-----END CERTIFICATE-----'

  $ssl_key = '-----BEGIN RSA PRIVATE KEY-----
MIIEowIBAAKCAQEAs/HED6o2VtaDPZslEKLau3RPdbifz1M7NYLW2+CNraUHBk0d
ZoEIEbvJekrdHt6hC1PHNbOLMVbDLtxXxRIibR3+tvTtfCEAf80UqpSOK+Yv+S5/
xbFYjcalkqMd+xtGjwgp92luzROxZjcEEZw/Nf855TxawEN2bvuBtHcZM1i3+uza
pNGqV1p+ev2u+L8L2Ho0zdHDc1Apw7E8443t0rLn9eHiVzji6qb7sBCC9F31wQsn
vKgCPbKjYCQmpHCB+k5DhnS6Noec9lDJaOArZI+Xi4JFHbLxXBB8NWVizls53XKq
eEg5xIzRXizY+Mzj6y9JBNc8z4f6mPEWF6H68wIDAQABAoIBAHj2IX0CR8ryIoEM
RMs9Hlp6oluZQ1xkL94V2QcvmS3MTL+QoR3hySHaoWKi5qe0sn9hzv0rd3swPr7G
gf3I5fmB+1LTrL0Plj1TB/xvJm8eKsuP1XZ4c/XCPlUnb6T4PeMycruNVV1oSo1S
mFqaNOfAbRPLEZpC/181lIhSs08Ox2tBMX1uO//mh5R+M66Zz7AnHI3ebjQw0Sws
Qt0ay9hrdjUb1GeEjdxoz+Wcm7k6teUlibNFFU+8YDiqyR+O/kqoSQv6rLe0tHBA
QQyom+2t0+R/fxw0Zs8Y1/ZiOtNM6kuPfFL+C3zhfDqeAgGbGajtKkqE//ki2K+d
dGMphxkCgYEA7gipa2+mi8l0Z8sON2Lzi/4sDK+HZO2jKWT6xbctT2Z23+uuuXaU
1kEdOJ7DJk9oQXeaGWbEbMzOevVm2Rx1FPqE8RQCc3lvEtcu2UNYiVYButtg9U3x
i9S9MCCfKj/Y1I/e7j0rOlUSC5q1uR2UjeSTjIFtWMTrYNc6319CJl8CgYEAwYaw
KfqFO4nSf0oZsDDAdnreMZKjBSoAq7X0kojrE2yjtMcW3oBlEwf/Gxs5bDT7GhPb
TEN5t5HOXIL3E4NSM3qaRdR76CJ7eDZuKfi3ztWIdF/TqCyR/bU13VLf3QCpGUmj
eM9TDFSQRbOxcG7Jp2hWXsSC/DtEgJe9GwEdq+0CgYEAl71p0xU/xEjOLgRhsakg
vJNxHT0gQJTEuHSo8DVPaxhUm3Yw0gXn55VmvVtn6BoiyekmkR7UBM+iqPubbrgX
YyI4cT5iOZ6l0gre0J1/6TysqaOD8ZyYaJ1bZTzGejZtUUPNx22zCuKEOGWNhs52
juWxsZYoULhnnDpYS2D8WF0CgYBKv1wRirqlKXGNSrCrVdkwqfpiSVH/7548tFXX
t1ycrwx4CaGypQLlG+STsqs2OSx3gQ3l4fYESiPbpZYLCmDYk1U8/XoySgdIgjWA
rplIIT/IOy8EONrWlIROjPD8aoHly4SBaAqaq5rh4Sr60z++ElWx2tMA2191D6ax
5HdybQKBgG2g4hb8UNdxVtgjXUBcPlbPCRWeyKBwVWcSycMCmuRbrEWDT8bfZ6MU
cdkZXDUaRCf+la4m4eoccL85NmYIzGVkpLlO466sjnRQO5oSqHC2gSUFwLwQu2v9
1L/w6N8IQ3u0vAI78UZdZ+8ds9NfUjUJ8SmYmthUFARuvH8j799A
-----END RSA PRIVATE KEY-----'

  class { 'cm::services::janus':
    hostname              => 'foohost',
    http_server_api_key   => 'janus-fish',
    http_server_port      => 8100,
    websocket_server_port => 8110,

    ssl_cert              => $ssl_cert,
    ssl_key               => $ssl_key,

    cm_application_path   => '/home/cm',
    cm_api_base_url       => 'http://www.cm.dev',
    cm_api_key            => 'cm-fish',

    rtpbroadcast_minport  => 10000,
    rtpbroadcast_maxport  => 15000,
    ufw_app_profile => '44:44000/tcp|10000:60000/udp'
  }

  include 'ufw'

  @ufw::rule { 'ssh':
    app_or_port => 22,
  }
}
